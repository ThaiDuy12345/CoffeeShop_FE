<div class="mx-auto container px-32 py-1 grid grid-cols-1 gap-x-10 my-10">
  <nz-breadcrumb class="w-full mb-5">
    <nz-breadcrumb-item>
      <a [routerLink]="'/main/product'">Menu</a>
    </nz-breadcrumb-item>
    <nz-breadcrumb-item (click)="navigateRelatedProduct()">
      <a>{{ product.category.name }}</a>
    </nz-breadcrumb-item>
    <nz-breadcrumb-item>{{ product.name }}</nz-breadcrumb-item>
  </nz-breadcrumb>
  <div class="w-full">
    <button
      [routerLink]="'/main/product'"
      class="text-sm text-left second-text-color mb-3"
    >
      <fa-icon [icon]="icons['faArrowLeft']"></fa-icon> Danh sách sản phẩm
    </button>
  </div>
  <nb-card>
    <nb-card-body class="grid grid-cols-5 space-x-5">
      <app-image class="col-span-2" [src]="product.picture"></app-image>
      <div class="col-span-3">
        <div class="font-bold w-full text-2xl mb-2"> {{ product.name }} </div>
        <div class="w-full mb-10"> 
          <span class="me-5">
            {{ avarageStar }} <fa-icon [icon]="icons['faStar']" [style]="'color: ' + renderStarColor(avarageStar)"></fa-icon>
          </span>
          <span class="me-5">
            {{ feedBackProducts.length }} Phản hồi
          </span>
          <span class="">
            10 Lượt bán
          </span>
        </div>
        <nz-divider [nzText]="text"></nz-divider>
        <ng-template #text>
          <fa-icon [icon]="icons['faCartFlatbed']" class="text-lg"></fa-icon>
        </ng-template>
        <div class="w-full mt-10 mb-10">
          <span class="me-5">
            Số lượng:
          </span>
          <span class="font-bold me-5">
            <nb-button-group>
              <button nbButton (click)="selected.quantity = selected.quantity + 1">+</button>
              <input [(ngModel)]="selected.quantity" name="quantityInput" #quantityInput="ngModel" nbInput class="w-[50px]"/>
              <button nbButton (click)="selected.quantity > 0 ? (selected.quantity = selected.quantity - 1) : null">-</button>
            </nb-button-group>
          </span>
          <span class="me-5">
            {{ product.quantity === -1 ? 'Luôn sẵn có' : product.quantity + 'sản phẩm sẵn có' }} 
          </span>
        </div>
        <div class="w-full mb-5">
          <button nbButton class="w-full" status="infor">Thêm vào giỏ hàng</button>
        </div>
        <div class="w-full mb-5">
          <button nbButton class="w-full" status="success">Mua và thanh toán ngay</button>
        </div>
      </div>
    </nb-card-body>
  </nb-card>
  <nb-card>
    <nb-card-header> Mô tả sản phẩm </nb-card-header>
    <nb-card-body>
      {{ product.description }}
    </nb-card-body>
  </nb-card>
  <nb-card>
    <nb-card-header> Các lượt đánh giá </nb-card-header>
    <nb-card-body class="grid grid-cols-1"> 
      <nz-comment [nzAuthor]="fb.account.name" [nzDatetime]="timeSince(fb.creationDate)" *ngFor="let fb of feedBackProducts">
        <nz-avatar nz-comment-avatar [nzText]="fb.account.name[0].toUpperCase()" style="color:rgb(55 65 81); background-color:#30b970;"></nz-avatar>
        <nz-comment-content>
          <fa-icon [icon]="icons['faStar']" [style]="'color: ' + renderStarColor(fb.star)" *ngFor="let i of [].constructor(fb.star)"></fa-icon> <br/>
          {{ fb.comment }}
        </nz-comment-content>
      </nz-comment>
    </nb-card-body>
  </nb-card>
  <nb-card>
    <nb-card-header> Sản phẩm liên quan </nb-card-header>
    <nb-card-body>
      <app-product-list [products]="relatedProducts" [isRelatedProductList]="true"></app-product-list>
    </nb-card-body>
    <nb-card-footer>
      <a class="w-full text-center block" (click)="navigateRelatedProduct()"><fa-icon [icon]="icons['faBars']"></fa-icon> &ensp;Xem thêm</a>
    </nb-card-footer>
  </nb-card>
</div>
